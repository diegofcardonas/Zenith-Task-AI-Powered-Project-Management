
import { useState, useEffect } from 'react';

const es = {
  "common": {
    "admin": "Admin",
    "manager": "Gerente",
    "member": "Miembro",
    "viewer": "Observador",
    "guest": "Invitado",
    "todo": "Por Hacer",
    "inprogress": "En Progreso",
    "done": "Hecho",
    "low": "Baja",
    "medium": "Media",
    "high": "Alta",
    "online": "En línea",
    "away": "Ausente",
    "busy": "Ocupado",
    "offline": "Desconectado",
    "save": "Guardar",
    "cancel": "Cancelar",
    "delete": "Eliminar",
    "close": "Cerrar",
    "edit": "Editar",
    "add": "Añadir",
    "unassigned": "Sin asignar",
    "new": "Nuevo",
    "allStatuses": "Todos los Estados",
    "allPriorities": "Todas las Prioridades",
    "loading": "Cargando",
    "error": "Error",
    "success": "Éxito",
    "info": "Información",
    "tasks": "Tarea",
    "tasks_plural": "Tareas",
    "daysAgo": "hace {{count}} días",
    "hoursAgo": "hace {{count}} horas",
    "minutesAgo": "hace {{count}} min",
    "justNow": "justo ahora",
    "yearsAgo": "hace {{count}} años",
    "monthsAgo": "hace {{count}} meses",
    "areYouSure": "¿Estás seguro?",
    "actionCannotBeUndone": "Esta acción no se puede deshacer.",
    "yes": "Sí",
    "no": "No",
    "page": "Página",
    "of": "de",
    "previous": "Anterior",
    "next": "Siguiente",
    "today": "Hoy",
    "more": "más",
    "sortBy": "Ordenar por",
    "name": "Nombre",
    "workloadHigh": "Mayor Carga",
    "reliabilityHigh": "Mayor Fiabilidad",
    "reliabilityLow": "Menor Fiabilidad",
    "role": "Rol",
    "team": "Equipo",
    "status": "Estado",
    "lastActive": "Última Actividad",
    "actions": "Acciones",
    "view": "Ver",
    "grid": "Cuadrícula",
    "table": "Tabla",
    "story": "Historia",
    "bug": "Error",
    "task": "Tarea",
    "epic": "Épica",
    "type": "Tipo",
    "key": "Clave",
    "points": "Puntos",
    "storyPoints": "Puntos de Historia"
  },
  "sidebar": {
    "menu": "Menú",
    "search": "Buscar...",
    "myTasks": "Mis Tareas",
    "dashboard": "Dashboard",
    "appAdmin": "Admin de App",
    "projects": "Proyectos",
    "allProjects": "Todos los Proyectos",
    "newFolder": "Nueva Carpeta",
    "newProject": "Nuevo Proyecto",
    "settings": "Configuración",
    "viewProfile": "Ver Perfil",
    "logout": "Cerrar Sesión",
    "setStatus": "Establecer tu estado",
    "newWorkspace": "Nuevo Espacio de Trabajo",
    "viewProject": "Ver Proyecto",
    "home": "Inicio",
    "favorites": "Favoritos",
    "workspace": "Espacio de Trabajo",
    "noFavorites": "Sin favoritos aún",
    "approvals": "Aprobaciones"
  },
  "mainContent": {
    "board": "Tablero",
    "list": "Lista",
    "calendar": "Calendario",
    "gantt": "Gantt",
    "dashboard": "Dashboard",
    "eisenhower": "Matriz",
    "backlog": "Backlog",
    "approvals": "Aprobaciones",
    "noProjectSelected": "Ningún Proyecto Seleccionado",
    "noProjectSelectedMessage": "Por favor, crea un nuevo proyecto en este espacio de trabajo o selecciona uno de la barra lateral.",
    "newTask": "Nuevo",
    "newTaskFromTemplate": "Nueva Tarea en Blanco",
    "templates": "Plantillas",
    "noTasksInList": "No hay tareas en esta lista. ¡Crea una para empezar!",
    "noTasksForGantt": "No hay tareas con fechas para mostrar en el diagrama de Gantt.",
    "createTaskTooltip": "Crear una nueva tarea (N)",
    "createTaskGuestTooltip": "Los invitados no pueden crear tareas",
    "createTaskNoProjectTooltip": "Selecciona un proyecto para crear una tarea"
  },
  "backlog": {
    "activeSprint": "Sprint Activo",
    "backlog": "Backlog",
    "dragToSprint": "Arrastra tareas aquí para iniciar el trabajo",
    "issues": "Incidencias",
    "createIssue": "Crear incidencia",
    "version": "Version",
    "epic": "Épica",
    "completeSprint": "Completar Sprint",
    "sprintCompleted": "¡Sprint Completado!",
    "sprintCompletedMessage": "{{count}} tareas movidas al archivo."
  },
  "listView": {
      "selected_plural": "{{count}} seleccionados",
      "changeStatus": "Cambiar Estado",
      "changePriority": "Cambiar Prioridad",
      "changeAssignee": "Cambiar Asignado",
      "task": "Tarea",
      "assignee": "Asignado",
      "dueDate": "Fecha",
      "priority": "Prioridad",
      "status": "Estado",
      "actions": "Acciones",
      "noTasks": "No hay tareas para mostrar."
  },
  "approvals": {
    "title": "Centro de Aprobaciones",
    "subtitle": "Gestiona las revisiones y aprobaciones de tareas.",
    "needsApproval": "Requieren mi Aprobación",
    "myRequests": "Mis Solicitudes Enviadas",
    "pending": "Pendiente",
    "approved": "Aprobado",
    "rejected": "Rechazado",
    "submitForApproval": "Enviar a Aprobación",
    "approve": "Aprobar",
    "reject": "Rechazar",
    "noPendingApprovals": "No tienes tareas pendientes de aprobación.",
    "noSentRequests": "No has enviado ninguna solicitud de aprobación.",
    "statusPending": "En espera de revisión",
    "statusApproved": "Solicitud aprobada",
    "statusRejected": "Solicitud rechazada"
  },
  "header": {
    "adminDashboard": "Dashboard de Admin",
    "appAdmin": "Consola de Administración",
    "myTasks": "Mis Tareas",
    "searchPlaceholder": "Buscar (F)...",
    "commandPaletteTitle": "Comandos (⌘K)",
    "notifications": "Notificaciones",
    "openUserProfile": "Abrir perfil de usuario",
    "openSidebar": "Abrir barra lateral",
    "toggleNotifications": "Alternar notificaciones",
    "editProject": "Editar Proyecto",
    "deleteProject": "Eliminar Proyecto",
    "help": "Centro de Ayuda"
  },
  "footer": {
    "copyright": "© {{year}} Zenith Task. Todos los derechos reservados."
  },
  "modals": {
    "editWorkspace": "Editar Espacio de Trabajo",
    "createWorkspace": "Crear Nuevo Espacio de Trabajo",
    "workspaceName": "Nombre del Espacio de Trabajo",
    "workspaceNamePlaceholder": "p. ej. Sprint de Marketing Q3",
    "workspaceNameEmptyError": "El nombre del espacio de trabajo no puede estar vacío.",
    "saveChanges": "Guardar Cambios",
    "create": "Crear",
    "editProject": "Editar Proyecto",
    "createProject": "Crear Nuevo Proyecto",
    "projectName": "Nombre del Proyecto",
    "projectNamePlaceholder": "p. ej. Rediseño de Sitio Web",
    "projectNameEmptyError": "El nombre del proyecto no puede estar vacío.",
    "folderOptional": "Carpeta (Opcional)",
    "noFolder": "Sin carpeta",
    "color": "Color",
    "editFolder": "Editar Carpeta",
    "createFolder": "Crear Nueva Carpeta",
    "folderName": "Nombre de la Carpeta",
    "folderNamePlaceholder": "p. ej. Iniciativas Q3",
    "folderNameEmptyError": "El nombre de la carpeta no puede estar vacío.",
    "manageMembers": "Gestionar Miembros",
    "addMember": "Añadir Nuevo Miembro",
    "fullName": "Nombre Completo",
    "addUser": "Añadir Usuario",
    "usernameEmptyError": "El nombre de usuario no puede estar vacío.",
    "manageRolesAdmin": "Puedes gestionar los roles de los usuarios.",
    "manageRolesNonAdmin": "Solo los administradores pueden gestionar los roles.",
    "done": "Hecho",
    "editYourProfile": "Editar Tu Perfil",
    "editProfileOf": "Perfil: {{name}}",
    "jobTitle": "Cargo",
    "email": "Correo",
    "team": "Equipo",
    "aboutMe": "Acerca de mí",
    "aboutMePlaceholder": "Escribe una breve biografía...",
    "taskDependencies": "Dependencias de Tarea",
    "taskIsBlocking": "\"{{title}}\" está bloqueando:",
    "taskIsNotBlocking": "Esta tarea no está bloqueando ninguna otra tarea actualmente.",
    "dayTasksTitle": "{{day}}",
    "userTasksTitle": "Tareas de {{name}}",
    "allWorkspaces": "Todos los Espacios de Trabajo ({{count}})",
    "allProjects": "Todos los Proyectos ({{count}})",
    "allTasks": "Todas las Tareas",
    "allTasksCount": "Todas las Tareas ({{count}})",
    "noTasksInCategory": "No se encontraron tareas para esta categoría.",
    "allUsers": "Todos los Usuarios ({{count}})",
    "settings": "Configuración",
    "account": "Cuenta",
    "general": "General",
    "notifications": "Notificaciones",
    "integrations": "Integraciones",
    "appearance": "Apariencia",
    "colorMode": "Modo de Color",
    "lightMode": "Modo Claro",
    "darkMode": "Modo Oscuro",
    "theme": "Tema",
    "language": "Idioma",
    "timezone": "Zona Horaria",
    "startOfWeek": "Inicio de Semana",
    "monday": "Lunes",
    "sunday": "Domingo",
    "emailDigest": "Resumen por Correo",
    "pushNotifications": "Notificaciones Push",
    "mentions": "Menciones (@usuario)",
    "taskAssignments": "Asignaciones de Tareas",
    "connected": "Conectado",
    "connect": "Conectar",
    "taskDetails": "Detalles de la Tarea",
    "taskTitlePlaceholder": "Título de la Tarea",
    "apply": "Aplicar",
    "description": "Descripción",
    "addMoreDetail": "Añade una descripción más detallada...",
    "attachments": "Adjuntos",
    "attachFile": "+ Adjuntar Archivo",
    "subtasks": "Subtareas",
    "subtasksCompleted": "Subtareas ({{completed}}/{{total}})",
    "addSubtask": "+ Añadir una subtarea",
    "dependencies": "Dependencias",
    "dependsOn": "Depende de",
    "blocking": "Bloqueando",
    "addDependency": "+ Añadir",
    "noDependencies": "Esta tarea no tiene dependencias.",
    "noBlocking": "Esta tarea no está bloqueando ninguna otra tarea.",
    "noAvailableTasks": "No hay tareas disponibles",
    "comments": "Comentarios",
    "status": "Estado",
    "assignee": "Asignado",
    "priority": "Prioridad",
    "dueDate": "Fecha de Vencimiento",
    "reminder": "Recordatorio",
    "noReminder": "Sin recordatorio",
    "onDueDate": "En la fecha de vencimiento",
    "oneDayBefore": "1 día antes",
    "twoDaysBefore": "2 días antes",
    "oneWeekBefore": "1 semana antes",
    "createdAt": "Creado el",
    "deleteTask": "Eliminar Tarea",
    "saveAsTemplate": "Guardar como Plantilla",
    "saveAndClose": "Guardar y Cerrar",
    "confirmDeleteTask": "¿Estás seguro de que quieres eliminar esta tarea? Esta acción no se puede deshacer.",
    "confirmDeleteComment": "¿Estás seguro de que quieres eliminar este comentario?",
    "templateNamePrompt": "Ingresa un nombre para esta plantilla:",
    "commandPalettePlaceholder": "Escribe un comando o busca...",
    "noResultsFound": "No se encontraron resultados.",
    "commentPlaceholder": "Escribe un comentario... escribe @ para mencionar",
    "reply": "Responder",
    "comment": "Comentar",
    "thisProject": "este proyecto",
    "profile": "Perfil",
    "performance": "Rendimiento",
    "activity": "Actividad",
    "skills": "Habilidades",
    "addSkill": "Añadir habilidad...",
    "tasksCompleted": "Tareas Completadas",
    "onTimeCompletion": "A Tiempo",
    "overdueTasks": "Atrasadas",
    "totalWorkload": "Carga Total",
    "completionRate": "Tasa de Finalización",
    "performanceOverview": "Resumen de Rendimiento",
    "noActivity": "No hay actividad reciente para mostrar.",
    "filterByRole": "Filtrar por Rol",
    "filterByTeam": "Filtrar por Equipo",
    "filterByStatus": "Filtrar por Estado",
    "priorityBreakdown": "Desglose por Prioridad",
    "searchUsers": "Buscar usuarios...",
    "reliability": "Fiabilidad",
    "searchSettings": "Buscar ajustes...",
    "density": "Densidad",
    "compact": "Compacta",
    "comfortable": "Cómoda",
    "dangerZone": "Zona de Peligro",
    "deleteAccount": "Eliminar Cuenta",
    "deleteAccountWarning": "Una vez que elimines tu cuenta, no hay vuelta atrás. Por favor, asegúrate.",
    "workspace": "Espacio de Trabajo",
    "approvalStatus": "Estado de Aprobación"
  },
  "notifications": {
    "title": "Notificaciones",
    "markAllAsRead": "Marcar todo como leído",
    "noNotifications": "No tienes notificaciones.",
    "mentionMessage": "{{name}} te mencionó en un comentario en la tarea \"{{taskTitle}}\"",
    "approvalRequested": "{{name}} solicitó aprobación para \"{{taskTitle}}\"",
    "taskApproved": "Tu tarea \"{{taskTitle}}\" fue aprobada",
    "taskRejected": "Tu tarea \"{{taskTitle}}\" fue rechazada"
  },
  "userSelection": {
    "welcome": "Bienvenido a Zenith Task",
    "selectProfile": "Por favor, selecciona tu perfil para continuar"
  },
  "welcome": {
    "loading": "Cargando tu espacio de trabajo..."
  },
  "toasts": {
    "taskDeleted": "Tarea \"{{title}}\" eliminada correctamente.",
    "taskDeleted_plural": "{{count}} tareas eliminadas correctamente",
    "userProfileUpdated": "Perfil de usuario actualizado.",
    "userCreated": "Usuario \"{{name}}\" creado.",
    "userDeleted": "Usuario \"{{name}}\" eliminado correctamente.",
    "workspaceUpdated": "Espacio de trabajo actualizado.",
    "workspaceCreated": "Espacio de trabajo creado.",
    "workspaceDeleted": "Espacio de trabajo \"{{name}}\" eliminado correctamente.",
    "projectUpdated": "Proyecto actualizado.",
    "projectCreated": "Proyecto creado.",
    "projectDeleted": "Proyecto \"{{name}}\" eliminado correctamente.",
    "folderUpdated": "Carpeta actualizada.",
    "folderCreated": "Carpeta creada.",
    "folderDeleted": "Carpeta \"{{name}}\" eliminado correctamente.",
    "tasksReordered": "Orden de tareas actualizado.",
    "sidebarReordered": "Barra lateral reordenada.",
    "tasksUpdated": "{{count}} tarea actualizada.",
    "tasksUpdated_plural": "{{count}} tareas actualizadas.",
    "templateSaved": "Plantilla \"{{name}}\" guardada.",
    "projectNotFound": "Proyecto \"{{name}}\" no encontrado. Creando tarea en el proyecto actual.",
    "selectProjectFirst": "Por favor, selecciona un proyecto primero para añadir una tarea.",
    "userNotFound": "Usuario \"{{name}}\" no encontrado.",
    "taskStatusUpdated": "Estado de \"{{title}}\" actualizado a {{status}}.",
    "taskAssigned": "Tarea \"{{title}}\" asignada a {{name}}.",
    "taskNotFound": "Tarea \"{{title}}\" no encontrada.",
    "loginFailed": "Credenciales inválidas. Por favor, inténtalo de nuevo.",
    "signupFailed": "El correo electrónico ya está en uso. Por favor, inicia sesión.",
    "signupSuccess": "¡Registro exitoso! Bienvenido.",
    "bulkUpdateSuccess": "{{count}} usuarios actualizados correctamente.",
    "approvalSubmitted": "Solicitud de aprobación enviada.",
    "approvalApproved": "Tarea aprobada y movida a Hecho.",
    "approvalRejected": "Tarea rechazada."
  },
  "gantt": {
    "taskName": "Nombre de la Tarea",
    "showList": "Ver Lista",
    "showChart": "Ver Gráfico"
  },
  "admin": {
    "overview": "Visión General",
    "users": "Usuarios",
    "teams": "Equipos",
    "globalSettings": "Configuración Global",
    "auditLog": "Auditoría",
    "billing": "Facturación",
    "systemHealth": "Salud del Sistema",
    "apiUsage": "Uso de API",
    "storage": "Almacenamiento",
    "allSystemsOperational": "Todos los sistemas operativos",
    "totalTasks": "Tareas Totales",
    "completed": "Completadas",
    "overdue": "Atrasadas",
    "totalUsers": "Usuarios Totales",
    "tasksByStatus": "Tareas por Estado",
    "tasksByPriority": "Tareas por Prioridad",
    "userWorkload": "Carga de Trabajo de Usuario",
    "clearFilters": "Limpiar Filtros",
    "noUsersWithFilter": "No hay usuarios para mostrar con el filtro actual.",
    "members": "Miembros",
    "activeMembers": "Miembros Activos",
    "newMembers": "Nuevos este mes",
    "team": "Equipo",
    "role": "Rol",
    "assignedTasks": "Tareas Asignadas",
    "manageWorkspaces": "Gestión de Espacios de Trabajo",
    "manageUsers": "Gestión de Usuarios",
    "user": "Usuario",
    "email": "Correo",
    "actions": "Acciones",
    "noTasksWithFilter": "No hay tareas para mostrar con el filtro actual.",
    "roleDescriptions": "Descripciones de Roles",
    "adminDescription": "Control total del sistema. Facturación, configuración global y gestión de usuarios del sistema.",
    "managerDescription": "Gestión operativa. Puede crear proyectos, asignar tareas y ver estadísticas del equipo.",
    "memberDescription": "Puede crear y gestionar tareas dentro de los proyectos existentes.",
    "viewerDescription": "Puede ver y comentar en proyectos y tareas, pero no puede crear ni editar contenido.",
    "guestDescription": "Acceso limitado de solo lectura a proyectos o tareas específicas a las que se les invite.",
    "workload": "Carga",
    "bulkActions": "Acciones en Lote",
    "selectedUsers": "{{count}} seleccionados",
    "changeRole": "Cambiar Rol",
    "changeTeam": "Cambiar Equipo",
    "exportCsv": "Exportar CSV",
    "systemActivity": "Actividad del Sistema",
    "recentAuditLogs": "Registros de Auditoría Recientes",
    "userAction": "Acción",
    "timestamp": "Fecha",
    "details": "Detalles",
    "allowGuestAccess": "Permitir acceso de invitados",
    "publicProjects": "Proyectos públicos por defecto",
    "branding": "Marca",
    "workspaceName": "Nombre del Espacio de Trabajo",
    "security": "Seguridad",
    "accessControl": "Control de Acceso",
    "enforce2FA": "Forzar autenticación de dos factores (2FA)",
    "auditAction_create_project": "creó el proyecto",
    "auditAction_delete_user": "eliminó al usuario",
    "auditAction_change_role": "cambió el rol de"
  },
  "eisenhower": {
    "urgentImportant": "Hacer (Urgente & Importante)",
    "notUrgentImportant": "Planificar (No Urgente & Importante)",
    "urgentNotImportant": "Delegar (Urgente & No Importante)",
    "notUrgentNotImportant": "Eliminar (No Urgente & No Importante)",
    "noTasks": "Sin tareas en este cuadrante"
  },
  "auth": {
    "login": "Iniciar Sesión",
    "signup": "Registrarse",
    "email": "Correo Electrónico",
    "password": "Contraseña",
    "fullName": "Nombre Completo",
    "loginToAccount": "Inicia sesión en tu cuenta",
    "createAnAccount": "Crea una cuenta nueva",
    "dontHaveAccount": "¿No tienes una cuenta?",
    "alreadyHaveAccount": "¿Ya tienes una cuenta?",
    "fastLogin": "Acceso Rápido Demo"
  },
  "myTasks": {
      "goodMorning": "Buenos días",
      "goodAfternoon": "Buenas tardes",
      "goodEvening": "Buenas noches",
      "greetingSubtitle": "Tienes {{count}} tareas para hoy",
      "goodJob": "¡Buen trabajo! No tienes tareas para hoy.",
      "overdue": "Atrasadas",
      "dueToday": "Para Hoy",
      "upcoming": "Próximas",
      "completedRecently": "Completadas Recientemente",
      "noDueDate": "Sin Fecha",
      "noTasks": "No hay tareas en esta categoría."
  },
  "projectDashboard": {
      "tasksByStatus": "Tareas por Estado",
      "tasksByAssignee": "Tareas por Asignado",
      "noTasksToShow": "No hay tareas para mostrar",
      "unassigned": "Sin Asignar"
  },
  "weekdays": {
      "sun": "Dom",
      "mon": "Lun",
      "tue": "Mar",
      "wed": "Mié",
      "thu": "Jue",
      "fri": "Vie",
      "sat": "Sáb"
  },
  "help": {
    "title": "Centro de Ayuda",
    "search": "Buscar ayuda...",
    "categories": {
      "general": "Conceptos Generales",
      "views": "Vistas de Proyecto",
      "roles": "Roles y Permisos",
      "actions": "Acciones y Flujos",
      "mobile": "Funciones Móviles"
    },
    "articles": {
      "workspace": {
        "title": "Espacios de Trabajo",
        "content": "Un **Espacio de Trabajo** es el contenedor principal de tu organización (Ej: Ceitel Operaciones). Dentro de él, puedes organizar tus proyectos en carpetas y listas."
      },
      "projects": {
        "title": "Proyectos y Carpetas",
        "content": "Los **Proyectos (Listas)** contienen tus tareas. Puedes agrupar varios proyectos relacionados (ej: Contrato DICO) dentro de una **Carpeta** para mantener el orden."
      },
      "board": {
        "title": "Vista de Tablero (Kanban)",
        "content": "Visualiza el flujo de trabajo moviendo tarjetas entre columnas (Por Hacer, En Progreso, Hecho). Arrastra y suelta para actualizar el estado."
      },
      "list": {
        "title": "Vista de Lista",
        "content": "Una tabla detallada ideal para gestión masiva. Permite filtrar, ordenar y realizar acciones en lote (seleccionar múltiples tareas para editar/borrar)."
      },
      "backlog": {
        "title": "Vista Backlog",
        "content": "Inspirada en Jira. Divide el trabajo en un **Sprint Activo** (tareas en curso) y un **Backlog** (pila de producto). Usa los Story Points para estimar esfuerzo."
      },
      "gantt": {
        "title": "Diagrama de Gantt",
        "content": "Cronograma visual para ver la duración y dependencias de las tareas. Arrastra los bordes de las barras para ajustar fechas de inicio o fin."
      },
      "eisenhower": {
        "title": "Matriz de Eisenhower",
        "content": "Prioriza tareas automáticamente en 4 cuadrantes según su Urgencia (Fecha) e Importancia (Prioridad). Ayuda a decidir qué hacer ahora o delegar."
      },
      "approvals": {
        "title": "Aprobaciones",
        "content": "Flujo de revisión formal. Los miembros pueden enviar una tarea a 'Revisión'. Los Managers/Admins verán la solicitud en el centro de Aprobaciones para Aprobar o Rechazar."
      },
      "roles": {
        "title": "Roles de Usuario",
        "content": "- **Admin:** Dueño del sistema. Gestiona facturación y usuarios globales.\n- **Manager:** Jefe de Proyecto. Crea proyectos y gestiona equipos.\n- **Member:** Trabajador. Crea y edita tareas.\n- **Viewer:** Solo lectura. Puede comentar pero no editar."
      },
      "tasks": {
        "title": "Creación de Tareas",
        "content": "Usa el botón **'Nuevo'** o la tecla `N`. Puedes asignar responsables, fechas, prioridad y adjuntar archivos. Las tareas pueden tener subtareas y dependencias."
      }
    }
  }
};

const en = {
  // ... English translations (Simplified for this output, ideally mirror Spanish)
  "common": {
    "admin": "Admin",
    "manager": "Manager",
    "member": "Member",
    "viewer": "Viewer",
    "guest": "Guest",
    "todo": "Todo",
    "inprogress": "In Progress",
    "done": "Done",
    "story": "Story",
    "bug": "Bug",
    "task": "Task",
    "epic": "Epic",
    "type": "Type",
    "key": "Key",
    "points": "Points",
    "storyPoints": "Story Points",
    "low": "Low",
    "medium": "Medium",
    "high": "High",
    "unassigned": "Unassigned",
    "actions": "Actions",
    "online": "Online",
    "away": "Away",
    "busy": "Busy",
    "offline": "Offline",
    "save": "Save",
    "cancel": "Cancel",
    "delete": "Delete",
    "close": "Close",
    "edit": "Edit",
    "add": "Add",
    "new": "New",
    "allStatuses": "All Statuses",
    "allPriorities": "All Priorities",
    "loading": "Loading",
    "error": "Error",
    "success": "Success",
    "info": "Info",
    "tasks": "Task",
    "tasks_plural": "Tasks",
    "daysAgo": "{{count}} days ago",
    "hoursAgo": "{{count}} hours ago",
    "minutesAgo": "{{count}} min ago",
    "justNow": "just now",
    "yearsAgo": "{{count}} years ago",
    "monthsAgo": "{{count}} months ago",
    "areYouSure": "Are you sure?",
    "actionCannotBeUndone": "This action cannot be undone.",
    "yes": "Yes",
    "no": "No",
    "page": "Page",
    "of": "of",
    "previous": "Previous",
    "next": "Next",
    "today": "Today",
    "more": "more"
  },
  "mainContent": {
    "board": "Board",
    "list": "List",
    "calendar": "Calendar",
    "gantt": "Gantt",
    "dashboard": "Dashboard",
    "eisenhower": "Matrix",
    "backlog": "Backlog",
    "approvals": "Approvals",
    "noProjectSelected": "No Project Selected",
    "noProjectSelectedMessage": "Please create a new project in this workspace or select one from the sidebar.",
    "newTask": "New",
    "newTaskFromTemplate": "New Blank Task",
    "templates": "Templates",
    "noTasksInList": "No tasks in this list. Create one to get started!",
    "noTasksForGantt": "No tasks with dates to show in Gantt chart.",
    "createTaskTooltip": "Create a new task (N)",
    "createTaskGuestTooltip": "Guests cannot create tasks",
    "createTaskNoProjectTooltip": "Select a project to create a task"
  },
  "approvals": {
    "title": "Approvals Center",
    "subtitle": "Manage task reviews and approvals.",
    "needsApproval": "Needs My Approval",
    "myRequests": "My Sent Requests",
    "pending": "Pending",
    "approved": "Approved",
    "rejected": "Rejected",
    "submitForApproval": "Submit for Approval",
    "approve": "Approve",
    "reject": "Reject",
    "noPendingApprovals": "No tasks pending your approval.",
    "noSentRequests": "You haven't sent any approval requests.",
    "statusPending": "Pending review",
    "statusApproved": "Request approved",
    "statusRejected": "Request rejected"
  },
  "backlog": {
    "activeSprint": "Active Sprint",
    "backlog": "Backlog",
    "dragToSprint": "Drag tasks here to start work",
    "issues": "Issues",
    "createIssue": "Create issue",
    "version": "Version",
    "epic": "Epic",
    "completeSprint": "Complete Sprint",
    "sprintCompleted": "Sprint Completed!",
    "sprintCompletedMessage": "{{count}} tasks moved to archive."
  },
  "listView": {
      "selected_plural": "{{count}} selected",
      "changeStatus": "Change Status",
      "changePriority": "Change Priority",
      "changeAssignee": "Change Assignee",
      "task": "Task",
      "assignee": "Assignee",
      "dueDate": "Due Date",
      "priority": "Priority",
      "status": "Status",
      "actions": "Actions",
      "noTasks": "No tasks to show."
  },
  "sidebar": {
    "menu": "Menu",
    "search": "Search...",
    "myTasks": "My Tasks",
    "dashboard": "Dashboard",
    "appAdmin": "App Admin",
    "projects": "Projects",
    "allProjects": "All Projects",
    "newFolder": "New Folder",
    "newProject": "New Project",
    "settings": "Settings",
    "viewProfile": "View Profile",
    "logout": "Logout",
    "setStatus": "Set your status",
    "newWorkspace": "New Workspace",
    "viewProject": "View Project",
    "home": "Home",
    "favorites": "Favorites",
    "workspace": "Workspace",
    "noFavorites": "No favorites yet",
    "approvals": "Approvals"
  },
  "header": {
    "adminDashboard": "Admin Dashboard",
    "appAdmin": "Admin Console",
    "myTasks": "My Tasks",
    "searchPlaceholder": "Search (F)...",
    "commandPaletteTitle": "Commands (⌘K)",
    "notifications": "Notifications",
    "openUserProfile": "Open user profile",
    "openSidebar": "Open sidebar",
    "toggleNotifications": "Toggle notifications",
    "editProject": "Edit Project",
    "deleteProject": "Delete Project",
    "help": "Help Center"
  },
  "footer": {
    "copyright": "© {{year}} Zenith Task. All rights reserved."
  },
  "modals": {
    "editWorkspace": "Edit Workspace",
    "createWorkspace": "Create New Workspace",
    "workspaceName": "Workspace Name",
    "workspaceNamePlaceholder": "e.g. Q3 Marketing Sprint",
    "workspaceNameEmptyError": "Workspace name cannot be empty.",
    "saveChanges": "Save Changes",
    "create": "Create",
    "editProject": "Edit Project",
    "createProject": "Create New Project",
    "projectName": "Project Name",
    "projectNamePlaceholder": "e.g. Website Redesign",
    "projectNameEmptyError": "Project name cannot be empty.",
    "folderOptional": "Folder (Optional)",
    "noFolder": "No Folder",
    "color": "Color",
    "editFolder": "Edit Folder",
    "createFolder": "Create New Folder",
    "folderName": "Folder Name",
    "folderNamePlaceholder": "e.g. Q3 Initiatives",
    "folderNameEmptyError": "Folder name cannot be empty.",
    "manageMembers": "Manage Members",
    "addMember": "Add New Member",
    "fullName": "Full Name",
    "addUser": "Add User",
    "usernameEmptyError": "Username cannot be empty.",
    "manageRolesAdmin": "You can manage user roles.",
    "manageRolesNonAdmin": "Only admins can manage roles.",
    "done": "Done",
    "editYourProfile": "Edit Your Profile",
    "editProfileOf": "Profile: {{name}}",
    "jobTitle": "Job Title",
    "email": "Email",
    "team": "Team",
    "aboutMe": "About Me",
    "aboutMePlaceholder": "Write a short bio...",
    "taskDependencies": "Task Dependencies",
    "taskIsBlocking": "\"{{title}}\" is blocking:",
    "taskIsNotBlocking": "This task is not currently blocking any other tasks.",
    "dayTasksTitle": "{{day}}",
    "userTasksTitle": "Tasks for {{name}}",
    "allWorkspaces": "All Workspaces ({{count}})",
    "allProjects": "All Projects ({{count}})",
    "allTasks": "All Tasks",
    "allTasksCount": "All Tasks ({{count}})",
    "noTasksInCategory": "No tasks found for this category.",
    "allUsers": "All Users ({{count}})",
    "settings": "Settings",
    "account": "Account",
    "general": "General",
    "notifications": "Notifications",
    "integrations": "Integrations",
    "appearance": "Appearance",
    "colorMode": "Color Mode",
    "lightMode": "Light Mode",
    "darkMode": "Dark Mode",
    "theme": "Theme",
    "language": "Language",
    "timezone": "Timezone",
    "startOfWeek": "Start of Week",
    "monday": "Monday",
    "sunday": "Sunday",
    "emailDigest": "Email Digest",
    "pushNotifications": "Push Notifications",
    "mentions": "Mentions (@user)",
    "taskAssignments": "Task Assignments",
    "connected": "Connected",
    "connect": "Connect",
    "taskDetails": "Task Details",
    "taskTitlePlaceholder": "Task Title",
    "apply": "Apply",
    "description": "Description",
    "addMoreDetail": "Add a more detailed description...",
    "attachments": "Attachments",
    "attachFile": "+ Attach File",
    "subtasks": "Subtasks",
    "subtasksCompleted": "Subtareas ({{completed}}/{{total}})",
    "addSubtask": "+ Add a subtask",
    "dependencies": "Dependencies",
    "dependsOn": "Depends on",
    "blocking": "Blocking",
    "addDependency": "+ Add",
    "noDependencies": "This task has no dependencies.",
    "noBlocking": "This task is not blocking any other tasks.",
    "noAvailableTasks": "No tasks available",
    "comments": "Comments",
    "status": "Status",
    "assignee": "Assignee",
    "priority": "Priority",
    "dueDate": "Due Date",
    "reminder": "Reminder",
    "noReminder": "No reminder",
    "onDueDate": "On due date",
    "oneDayBefore": "1 day before",
    "twoDaysBefore": "2 days before",
    "oneWeekBefore": "1 week before",
    "createdAt": "Created at",
    "deleteTask": "Delete Task",
    "saveAsTemplate": "Save as Template",
    "saveAndClose": "Save & Close",
    "confirmDeleteTask": "Are you sure you want to delete this task? This action cannot be undone.",
    "confirmDeleteComment": "Are you sure you want to delete this comment?",
    "templateNamePrompt": "Enter a name for this template:",
    "commandPalettePlaceholder": "Type a command or search...",
    "noResultsFound": "No results found.",
    "commentPlaceholder": "Write a comment... type @ to mention",
    "reply": "Reply",
    "comment": "Comment",
    "thisProject": "this project",
    "profile": "Profile",
    "performance": "Performance",
    "activity": "Activity",
    "skills": "Skills",
    "addSkill": "Add skill...",
    "tasksCompleted": "Tasks Completed",
    "onTimeCompletion": "On Time",
    "overdueTasks": "Overdue",
    "totalWorkload": "Total Workload",
    "completionRate": "Completion Rate",
    "performanceOverview": "Performance Overview",
    "noActivity": "No recent activity to show.",
    "filterByRole": "Filter by Role",
    "filterByTeam": "Filter by Team",
    "filterByStatus": "Filter by Status",
    "priorityBreakdown": "Priority Breakdown",
    "searchUsers": "Search users...",
    "reliability": "Reliability",
    "searchSettings": "Search settings...",
    "density": "Density",
    "compact": "Compact",
    "comfortable": "Comfortable",
    "dangerZone": "Danger Zone",
    "deleteAccount": "Delete Account",
    "deleteAccountWarning": "Once you delete your account, there is no going back. Please be certain.",
    "workspace": "Workspace",
    "approvalStatus": "Approval Status"
  },
  "notifications": {
    "title": "Notifications",
    "markAllAsRead": "Mark all as read",
    "noNotifications": "You have no notifications.",
    "mentionMessage": "{{name}} mentioned you in a comment on task \"{{taskTitle}}\"",
    "approvalRequested": "{{name}} requested approval for \"{{taskTitle}}\"",
    "taskApproved": "Your task \"{{taskTitle}}\" was approved",
    "taskRejected": "Your task \"{{taskTitle}}\" was rejected"
  },
  "auth": {
    "login": "Login",
    "signup": "Sign Up",
    "email": "Email",
    "password": "Password",
    "fullName": "Full Name",
    "loginToAccount": "Login to your account",
    "createAnAccount": "Create an account",
    "dontHaveAccount": "Don't have an account?",
    "alreadyHaveAccount": "Already have an account?",
    "fastLogin": "Quick Demo Login"
  },
  "toasts": {
    "taskDeleted": "Task \"{{title}}\" deleted successfully.",
    "taskDeleted_plural": "{{count}} tasks deleted successfully.",
    "userProfileUpdated": "User profile updated.",
    "userCreated": "User \"{{name}}\" created.",
    "userDeleted": "User \"{{name}}\" deleted successfully.",
    "workspaceUpdated": "Workspace updated.",
    "workspaceCreated": "Workspace created.",
    "workspaceDeleted": "Workspace \"{{name}}\" deleted successfully.",
    "projectUpdated": "Project updated.",
    "projectCreated": "Project created.",
    "projectDeleted": "Project \"{{name}}\" deleted successfully.",
    "folderUpdated": "Folder updated.",
    "folderCreated": "Folder created.",
    "folderDeleted": "Folder \"{{name}}\" deleted successfully.",
    "tasksReordered": "Tasks order updated.",
    "sidebarReordered": "Sidebar reordered.",
    "tasksUpdated": "{{count}} task updated.",
    "tasksUpdated_plural": "{{count}} tasks updated.",
    "templateSaved": "Template \"{{name}}\" saved.",
    "projectNotFound": "Project \"{{name}}\" not found. Creating task in current project.",
    "selectProjectFirst": "Please select a project first to add a task.",
    "userNotFound": "User \"{{name}}\" not found.",
    "taskStatusUpdated": "Status of \"{{title}}\" updated to {{status}}.",
    "taskAssigned": "Task \"{{title}}\" assigned to {{name}}.",
    "taskNotFound": "Task \"{{title}}\" not found.",
    "loginFailed": "Invalid credentials. Please try again.",
    "signupFailed": "Email already in use. Please login.",
    "signupSuccess": "Registration successful! Welcome.",
    "bulkUpdateSuccess": "{{count}} users updated successfully.",
    "approvalSubmitted": "Approval request submitted.",
    "approvalApproved": "Task approved and moved to Done.",
    "approvalRejected": "Task rejected."
  },
  "admin": {
    "overview": "Overview",
    "users": "Users",
    "teams": "Teams",
    "globalSettings": "Global Settings",
    "auditLog": "Audit Log",
    "billing": "Billing",
    "systemHealth": "System Health",
    "apiUsage": "API Usage",
    "storage": "Storage",
    "allSystemsOperational": "All systems operational",
    "totalTasks": "Total Tasks",
    "completed": "Completed",
    "overdue": "Overdue",
    "totalUsers": "Total Users",
    "tasksByStatus": "Tasks by Status",
    "tasksByPriority": "Tasks by Priority",
    "userWorkload": "User Workload",
    "clearFilters": "Clear Filters",
    "noUsersWithFilter": "No users to show with current filter.",
    "members": "Members",
    "activeMembers": "Active Members",
    "newMembers": "New this month",
    "team": "Team",
    "role": "Role",
    "assignedTasks": "Assigned Tasks",
    "manageWorkspaces": "Manage Workspaces",
    "manageUsers": "Manage Users",
    "user": "User",
    "email": "Email",
    "actions": "Actions",
    "noTasksWithFilter": "No tasks to show with current filter.",
    "roleDescriptions": "Role Descriptions",
    "adminDescription": "Full system control.",
    "managerDescription": "Operational management.",
    "memberDescription": "Can create and manage tasks.",
    "viewerDescription": "Can view and comment.",
    "guestDescription": "Limited read-only access.",
    "workload": "Workload",
    "bulkActions": "Bulk Actions",
    "selectedUsers": "{{count}} selected",
    "changeRole": "Change Role",
    "changeTeam": "Change Team",
    "exportCsv": "Export CSV",
    "systemActivity": "System Activity",
    "recentAuditLogs": "Recent Audit Logs",
    "userAction": "Action",
    "timestamp": "Timestamp",
    "details": "Details",
    "allowGuestAccess": "Allow guest access",
    "publicProjects": "Public projects by default",
    "branding": "Branding",
    "workspaceName": "Workspace Name",
    "security": "Security",
    "accessControl": "Access Control",
    "enforce2FA": "Enforce 2FA",
    "auditAction_create_project": "created project",
    "auditAction_delete_user": "deleted user",
    "auditAction_change_role": "changed role of"
  },
  "eisenhower": {
    "urgentImportant": "Do (Urgent & Important)",
    "notUrgentImportant": "Schedule (Not Urgent & Important)",
    "urgentNotImportant": "Delegate (Urgent & Not Important)",
    "notUrgentNotImportant": "Delete (Not Urgent & Not Important)",
    "noTasks": "No tasks in this quadrant"
  },
  "help": {
    "title": "Help Center",
    "search": "Search help...",
    "categories": {
      "general": "General Concepts",
      "views": "Project Views",
      "roles": "Roles & Permissions",
      "actions": "Actions & Workflows",
      "mobile": "Mobile Features"
    },
    "articles": {
      "workspace": {
        "title": "Workspaces",
        "content": "A **Workspace** is the top-level container for your organization (e.g., Ceitel Operations). Inside it, you can organize projects into folders and lists."
      },
      "projects": {
        "title": "Projects & Folders",
        "content": "**Projects (Lists)** contain your tasks. You can group related projects (e.g., DICO Contract) inside a **Folder** to keep things organized."
      },
      "board": {
        "title": "Board View (Kanban)",
        "content": "Visualize workflow by moving cards between columns (Todo, In Progress, Done). Drag and drop to update status instantly."
      },
      "list": {
        "title": "List View",
        "content": "A detailed table perfect for bulk management. Allows filtering, sorting, and bulk actions (selecting multiple tasks to edit/delete)."
      },
      "backlog": {
        "title": "Backlog View",
        "content": "Jira-inspired view. Splits work into an **Active Sprint** (current tasks) and a **Backlog** (product pile). Use Story Points for estimation."
      },
      "gantt": {
        "title": "Gantt Chart",
        "content": "Timeline view to see task duration and dependencies. Drag bar edges to adjust start/end dates."
      },
      "eisenhower": {
        "title": "Eisenhower Matrix",
        "content": "Automatically prioritizes tasks into 4 quadrants based on Urgency (Date) and Importance (Priority). Helps decide what to Do or Delegate."
      },
      "approvals": {
        "title": "Approvals",
        "content": "Formal review workflow. Members can 'Submit for Approval'. Managers/Admins see requests in the Approval Center to Approve or Reject."
      },
      "roles": {
        "title": "User Roles",
        "content": "- **Admin:** System owner. Billing & global users.\n- **Manager:** Project Lead. Creates projects & manages teams.\n- **Member:** Worker. Creates & edits tasks.\n- **Viewer:** Read-only. Can comment but not edit."
      },
      "tasks": {
        "title": "Creating Tasks",
        "content": "Use the **'New'** button or press `N`. You can assign owners, dates, priority, and attach files. Tasks support subtasks and dependencies."
      }
    }
  }
};

class I18nService {
    language: 'es' | 'en';
    listeners: Set<() => void>;
    translations: any;

    constructor() {
        this.language = 'es';
        this.listeners = new Set();
        this.translations = { es, en };
        if (typeof window !== 'undefined') {
            const savedLang = localStorage.getItem('language') as 'es' | 'en';
            if (savedLang && (savedLang === 'es' || savedLang === 'en')) {
                this.language = savedLang;
            }
        }
    }

    changeLanguage(lang: 'es' | 'en') {
        this.language = lang;
        if (typeof window !== 'undefined') {
            localStorage.setItem('language', lang);
        }
        this.notify();
    }

    t(key: string, options?: any): any {
        const keys = key.split('.');
        let value = this.translations[this.language];
        
        for (const k of keys) {
            if (value === undefined) return key;
            value = value[k];
        }
        
        if (options?.returnObjects) {
            return value;
        }
        
        if (typeof value !== 'string') return key;

        if (options) {
             return value.replace(/\{\{(\w+)\}\}/g, (_: string, match: string) => {
                return options[match] !== undefined ? String(options[match]) : `{{${match}}}`;
            });
        }

        return value;
    }

    subscribe(listener: () => void) {
        this.listeners.add(listener);
        return () => this.listeners.delete(listener);
    }

    notify() {
        this.listeners.forEach(l => l());
    }
}

export const i18n = new I18nService();

export const useTranslation = () => {
    const [lang, setLang] = useState(i18n.language);

    useEffect(() => {
        return i18n.subscribe(() => setLang(i18n.language));
    }, []);

    return { t: (key: string, options?: any) => i18n.t(key, options), i18n };
};
